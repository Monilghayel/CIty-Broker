<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core">

    <ui:composition>
        <h:form>
            <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top py-3">
                <div class="container">
                    <a class="navbar-brand fw-bold text-primary" href="/RealEstate_V1/index.xhtml">
                        <i class="bi bi-hospital me-2"></i>CityBroker
                    </a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                            data-bs-target="#navbarNav" aria-controls="navbarNav"
                            aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse d-flex align-items-center" id="navbarNav">
                        <ul class="navbar-nav">
                            <li class="nav-item me-3">
                                <a class="nav-link active" href="/RealEstate_V1/index.xhtml">Home</a>
                            </li>
                            <li class="nav-item me-3">
                                <a class="nav-link" href="/RealEstate_V1/service.xhtml">Services</a>
                            </li>
                            <li class="nav-item me-3">
                                <a class="nav-link" href="/RealEstate_V1/aboutus.xhtml">About Us</a>
                            </li>
                            <h:panelGroup rendered="#{loginBean.loggedIn}">
                                <h:panelGroup rendered="#{userBean.selectedUser.role eq 'buyer'}">
                                    <li class="nav-item me-3">
                                        <a class="nav-link" href="/RealEstate_V1/appointment.xhtml">
                                            <i class="bi bi-calendar-check me-1"></i> My Appointments
                                        </a>
                                    </li>
                                </h:panelGroup>

                                <h:panelGroup rendered="#{userBean.selectedUser.role eq 'seller'}">
                                    <li class="nav-item me-3">
                                        <a class="nav-link" href="/RealEstate_V1/request.xhtml">
                                            <i class="bi bi-inbox me-1"></i>Requests
                                        </a>
                                    </li>
                                    <li class="nav-item me-3">
                                        <a class="nav-link" href="/RealEstate_V1/add-property.xhtml">
                                            <i class="bi bi-plus-circle me-1"></i>Add Property
                                        </a>
                                    </li>
                                    <li class="nav-item me-3">
                                        <a class="nav-link" href="/RealEstate_V1/myproperty.xhtml">
                                            <i class="bi bi-house me-1"></i>My Properties
                                        </a>
                                    </li>
                                </h:panelGroup>

                                <h:panelGroup rendered="#{userBean.selectedUser.role eq 'admin'}">
                                    <li class="nav-item dropdown me-3">
                                        <a class="nav-link dropdown-toggle" href="#" id="adminDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class="bi bi-person-gear me-1"></i>Admin
                                        </a>
                                        <ul class="dropdown-menu" aria-labelledby="adminDropdown">
                                            <li class="nav-item me-3">
                                                <a class="dropdown-item" href="/RealEstate_V1/all-properties.xhtml">
                                                    <i class="bi bi-building me-1"></i>All Properties
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="/RealEstate_V1/agent.xhtml">
                                                    <i class="bi bi-people me-1"></i>Agents
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="/RealEstate_V1/adminapoint.xhtml">
                                                    <i class="bi bi-calendar-check me-1"></i>All Appointments
                                                </a>
                                            </li>

                                        </ul>
                                    </li>
                                </h:panelGroup>
                            </h:panelGroup> 

                        </ul>

                        <div class="d-flex align-items-center ms-auto">
                            <a class="nav-link btn btn-primary me-2 px-3" href="/RealEstate_V1/contact.xhtml">
                                <i class="bi bi-telephone me-1"></i>Contact Us
                            </a>

                            <!-- Show Login button if NOT logged in -->
                            <h:panelGroup rendered="#{not loginBean.loggedIn}">
                                <a class="nav-link btn btn-primary me-2 px-3" href="/RealEstate_V1/login.xhtml">
                                    <i class="bi bi-box-arrow-in-right me-1"></i>Login
                                </a>
                            </h:panelGroup>

                            <!-- Show Profile dropdown if logged in -->
                            <h:panelGroup rendered="#{loginBean.loggedIn}">
                                <div class="dropdown">
                                    <a class="nav-link me-2 dropdown-toggle" href="#" role="button"
                                       data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="bi bi-person-circle icon-large"></i>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li>
                                            <a class="dropdown-item" href="/RealEstate_V1/profile.xhtml">
                                                <i class="bi bi-person me-2"></i>My Profile
                                            </a>
                                        </li>

                                        <h:panelGroup rendered="#{userBean.selectedUser.role eq 'seller'}">
                                            <li>
                                                <a class="dropdown-item" href="/RealEstate_V1/myproperty.xhtml">
                                                    <i class="bi bi-house me-2"></i>My Properties
                                                </a>
                                            </li>
                                        </h:panelGroup>

                                        <h:panelGroup rendered="#{userBean.selectedUser.role eq 'buyer'}">
                                            <li>
                                                <a class="dropdown-item" href="/RealEstate_V1/wishlist.xhtml">
                                                    <i class="bi bi-heart me-2"></i>Wishlist
                                                </a>
                                            </li>
                                        </h:panelGroup>
                                        <li><hr/></li>
                                        <li>
                                            <h:commandLink value="Logout" action="#{loginBean.logout}"
                                                           styleClass="dropdown-item text-danger">
                                                <i class="bi bi-box-arrow-right me-2"></i>
                                            </h:commandLink>
                                        </li>
                                    </ul>
                                </div>
                            </h:panelGroup>
                        </div>
                    </div>
                </div>
            </nav>
        </h:form>
    </ui:composition>
</html>
