<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:f="jakarta.faces.core"
      xmlns:pt="jakarta.faces.passthrough">
    <h:head>
        <title>Login - CityBroker</title>
        <!-- Common CSS -->
        <h:outputStylesheet library="css" name="common.css"/>
        <!-- Page Specific CSS -->
        <h:outputStylesheet library="css" name="header.css"/>
        <h:outputStylesheet library="css" name="login.css"/>
        <!-- External CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"/>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    </h:head>
    <h:body>
        <ui:include src="components/header.xhtml" />        
        <!--<ui:include src="components/toastMessages.xhtml" />-->
        <ui:include src="components/simpleMessage.xhtml"/>

        <!--        <div class="d-flex justify-content-center mt-3">
                    <ui:repeat value="#{facesContext.messageList}" var="msg">
                        <div class="alert w-auto 
        #{msg.severity.ordinal eq 0 ? 'alert-info' 
          : msg.severity.ordinal eq 1 ? 'alert-warning' 
          : msg.severity.ordinal eq 2 ? 'alert-danger' 
          : 'alert-secondary'} text-center">
        #{msg.summary}
   </div>
</ui:repeat>
</div>-->

        <!-- Login Section -->
        <section class="login-section">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-md-6">
                        <div class="auth-container">
                            <!-- Tabs -->
                            <ul class="nav nav-tabs" id="authTabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="login-tab" data-bs-toggle="tab" 
                                            data-bs-target="#login" type="button" role="tab" 
                                            aria-controls="login" aria-selected="true">
                                        <i class="bi bi-box-arrow-in-right"></i> Login
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="register-tab" data-bs-toggle="tab" 
                                            data-bs-target="#register" type="button" role="tab" 
                                            aria-controls="register" aria-selected="false">
                                        <i class="bi bi-person-plus"></i> Register
                                    </button>
                                </li>
                            </ul>

                            <!-- Tab Content -->
                            <div class="tab-content" id="authTabsContent">
                                <!-- Login Form -->
                                <div class="tab-pane fade show active" id="login" role="tabpanel" 
                                     aria-labelledby="login-tab">
                                    <div class="auth-form">
                                        <h2>Welcome Back!</h2>
                                        <p class="text-muted">Please login to your account</p>

                                        <h:form>
                                            <div class="mb-3">
                                                <h:outputLabel for="loginEmail" value="Email address" styleClass="form-label"/>
                                                <div class="input-group">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-envelope"></i>
                                                    </span>
                                                    <h:inputText id="loginEmail" value="#{loginBean.email}" 
                                                                 styleClass="form-control"
                                                                 pt:type="email" 
                                                                 pt:placeholder="Enter your email"
                                                                 required="true"/>
                                                </div>
                                            </div>

                                            <div class="mb-4">
                                                <h:outputLabel for="loginPassword" value="Password" styleClass="form-label"/>
                                                <div class="input-group">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-lock"></i>
                                                    </span>
                                                    <h:inputSecret id="loginPassword" value="#{loginBean.password}" 
                                                                   styleClass="form-control" 
                                                                   pt:placeholder="Enter your password"
                                                                   required="true"/>
                                                </div>
                                            </div>

                                            <h:commandButton value="Login"
                                                             action="#{loginBean.login}"
                                                             styleClass="btn btn-primary w-100 mb-2"/>

                                        </h:form>
                                    </div>
                                </div>

                                <!-- Register Form -->
                                <div class="tab-pane fade" id="register" role="tabpanel" 
                                     aria-labelledby="register-tab">
                                    <div class="auth-form">
                                        <h2>Create Account</h2>
                                        <p class="text-muted">Please fill in your details</p>

                                        <h:form>
                                            <div class="mb-3">
                                                <h:outputLabel for="registerName" value="Full Name" styleClass="form-label"/>
                                                <div class="input-group">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-person"></i>
                                                    </span>
                                                    <h:inputText id="registerName" value="#{registerBean.name}" 
                                                                 styleClass="form-control" 
                                                                 pt:placeholder="Enter your full name"
                                                                 required="true"/>
                                                </div>
                                            </div>

                                            <div class="mb-3">
                                                <h:outputLabel for="registerEmail" value="Email address" styleClass="form-label"/>
                                                <div class="input-group">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-envelope"></i>
                                                    </span>
                                                    <h:inputText id="registerEmail" value="#{registerBean.email}" 
                                                                 styleClass="form-control" 
                                                                 pt:type="email" 
                                                                 pt:placeholder="Enter your email"
                                                                 required="true"/>
                                                </div>
                                            </div>

                                            <div class="mb-3">
                                                <h:outputLabel for="registerPassword" value="Password" styleClass="form-label"/>
                                                <div class="input-group">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-lock"></i>
                                                    </span>
                                                    <h:inputSecret id="registerPassword" value="#{registerBean.password}" 
                                                                   styleClass="form-control" 
                                                                   pt:placeholder="Create a password"
                                                                   required="true"/>
                                                </div>
                                            </div>

                                            <div class="mb-3">
                                                <h:outputLabel for="confirmPassword" value="Confirm Password" styleClass="form-label"/>
                                                <div class="input-group">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-lock"></i>
                                                    </span>
                                                    <h:inputSecret id="confirmPassword" value="#{registerBean.confirmPassword}" 
                                                                   styleClass="form-control" 
                                                                   pt:placeholder="Confirm your password"
                                                                   required="true"/>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <h:outputLabel for="registerRole" value="Select Role" styleClass="form-label"/>
                                                <div class="input-group">
                                                    <span class="input-group-text">
                                                        <i class="bi bi-person-badge"></i>
                                                    </span>
                                                    <h:selectOneMenu id="registerRole" value="#{registerBean.role}" styleClass="form-select">
                                                        <f:selectItem itemValue="buyer" itemLabel="Buyer" />
                                                        <f:selectItem itemValue="seller" itemLabel="Seller" />
                                                    </h:selectOneMenu>
                                                </div>
                                            </div>

                                            <h:commandButton value="Create Account"
                                                             action="#{registerBean.register}"
                                                             styleClass="btn btn-primary w-100"/>
                                        </h:form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </h:body>
</html>
